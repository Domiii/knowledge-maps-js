<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>Knowledge Maps Test</title>
	
	<!-- JS libraries -->
    <script src="https://closure-library.googlecode.com/svn/trunk/closure/goog/base.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    
	<!-- Utilities -->
    <script src="js/squishy/Squishy.js" type="text/javascript"></script>
    <script src="js/squishy/Util.js" type="text/javascript"></script>
    <script src="js/squishy/DOMUtil.js" type="text/javascript"></script>
    
    
	<!-- UI stuff -->
    <script src="js/squishy/UI/UI.MapView.js" type="text/javascript"></script>
	
    
	<!-- Graph & Graph rendering -->
    <script src="js/squishy/Graph.js" type="text/javascript"></script>
    <script src="js/squishy/GraphUtil.js" type="text/javascript"></script>
    <script src="js/squishy/GraphLayout.js" type="text/javascript"></script>
    
    <script src="js/squishy/GraphGen.js" type="text/javascript"></script>
    
    <script src="js/squishy/GraphUI.js" type="text/javascript"></script>
    
</head>
<body>

    <!--KnowledgeMap container-->
    <div id="km_cont">
    	<!--KnowledgeMap viewport-->
        <div id="km_viewPort" style="position:relative; width:800px; height:600px; overflow:hidden; float:left">
    		<!--Actual KnowledgeMap-->
	        <div id="km_map" style="width:100%; height:100%">
    			<button style="position:absolute;">hi</button>
	        </div>
        </div>
        <div id="km_info" style="float:left">
        	info panel
        </div>
    </div>
    
    <script type="text/javascript">
        // create random graph
        var nRanksMin = 1;
        var nRanksMax = 2;
        var nWidthMin = 1;
        var nWidthMax = 2;
        var nChance = .8;
        var kmGraph = (new squishy.GraphGen()).genGraph(nRanksMin, nRanksMax, nWidthMin, nWidthMax, nChance);
        
        console.log(kmGraph.arcs[0]);
        console.log(kmGraph.arcs[1]);
        
        // assign layout to graph
        kmGraph.layout = {
            arcMinLength : 1,
            nodeSizeMax : {
                "x" : 100,
                "y" : 20
            },
            nodeSeparation : {
                "x" : 20,
                "y" : 20
            },
            font : "16px verdana"
        };
        
        // get KM DOM elements
        var kmCont = document.getElementById("km_cont");
        var kmViewPort = document.getElementById("km_viewPort");
        var kmMap = document.getElementById("km_map");
        var kmInfo = document.getElementById("km_info");
        
        // load image
        var imgSrc = "https://fc04.deviantart.net/fs70/f/2013/096/e/8/big_simple__piranha_flower_by_dragondud-d60m0jq.jpg";
        squishy.loadImage(imgSrc, function(img) {
        	// add child to map
            kmMap.appendChild(img);
            
            var w = img.clientWidth;
            var h = img.clientHeight;
            
            var cfg = {
                map : kmMap,
                viewPort : kmViewPort,
                mapSize : [w, h],
                viewPortPosition : [0, 0]
            };
        
            // create CanvasMap
            var mapView = new squishy.UI.MapView(cfg);
        
	        // render graph to map element
	        var graphUI = new squishy.GraphUI(kmGraph, kmMap, kmInfo);
        });
        
    </script>
</body>
</html>